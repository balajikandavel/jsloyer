<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Cloudfoundry on JeffSloyer.io</title>
    <link>http://www.jeffsloyer.io/tags/cloudfoundry/index.xml</link>
    <description>Recent content in Cloudfoundry on JeffSloyer.io</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>Code released under the Apache 2.0 license.</copyright>
    <atom:link href="http://www.jeffsloyer.io/tags/cloudfoundry/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Zero Downtime Deployment with the CF Autopilot Plugin - Video</title>
      <link>http://www.jeffsloyer.io/post/zero-downtime-deployment-with-the-cf-autopilot-plugin-video/</link>
      <pubDate>Wed, 01 Jul 2015 10:51:49 -0500</pubDate>
      
      <guid>http://www.jeffsloyer.io/post/zero-downtime-deployment-with-the-cf-autopilot-plugin-video/</guid>
      <description>&lt;p&gt;I recently wrote a &lt;a href=&#34;http://www.jeffsloyer.io/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/&#34;&gt;blog post &lt;/a&gt;on what a zero downtime deployment is, why it is important, and how to perform one. I am now posting a video on the same topic so you can learn about a zero downtime deployment by watching a video instead.&lt;/p&gt;

&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/y4zor2y-yck&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;

&lt;p&gt;If you prefer the tutorial and text instructions please check out &lt;a href=&#34;http://www.jeffsloyer.io/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/&#34;&gt;Zero Downtime Deployment with the CF Autopilot Plugin&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I would love to hear your feedback and any suggestions you have, please reach out to me on Twitter &lt;a href=&#34;https://twitter.com/jsloyer target=&#34;&gt;@jsloyer&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Zero Downtime Deployment with the CF Autopilot Plugin</title>
      <link>http://www.jeffsloyer.io/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/</link>
      <pubDate>Fri, 19 Jun 2015 10:41:59 -0500</pubDate>
      
      <guid>http://www.jeffsloyer.io/post/zero-down-time-deploys-with-the-cf-autopilot-plugin/</guid>
      <description>

&lt;p&gt;Zero down time deployments are a must for any Internet app running at scale.  Without the use of zero down time deployments, you would have to take down your application even just for a fraction of a second but in that fraction of a second you could lose a transaction or a purchase from a customer.  This is not acceptable anymore.  Some people like to call these apps cloud based apps, which I think is fine, but I’d rather call them Internet scale or born on the cloud apps.  The companies who create these apps understand the apps’s need to stay up, because their app is their only lifeline and, hopefully, a source of income from the world.&lt;/p&gt;

&lt;p&gt;Companies such as Facebook, Etsy, and Twitter have been using zero down time deployments for years.  They thrive because they do multiple deployments to production a day.  The number of deployments they do in one day is actually larger than most enterprise companies do in a full year.  Part of the trick is that the code changes are small but they have employed strategies such as zero down time deployments to get code into production as fast as they can.
&lt;!-- more --&gt;&lt;/p&gt;

&lt;h2 id=&#34;ground-rules&#34;&gt;Ground Rules…&lt;/h2&gt;

&lt;p&gt;There are many names for this, zero down time deployments, obviously, but some people use the term blue/green, while others use the term red/back.  They all mean the same thing.  Instead of having a bias for colors in this post lets use the term “zero down time”.&lt;/p&gt;

&lt;p&gt;So what is it?&lt;/p&gt;

&lt;p&gt;Zero Down time deployments are basically what they sound like.  You update production without taking downtime.  It’s not always that simple though.  For the context of this post we are going to be talking about how to do zero down time deployments in Cloud Foundry.&lt;/p&gt;

&lt;p&gt;Basically it’s a little trick to taking advantage of the way Cloud Foundry runs underneath the covers.  Before we jump into it, there are a couple of caveats that we should discuss first.  To successfully take advantage of zero down time deployments you should have followed the &lt;a href=&#34;http://12factor.net/&#34;&gt;12 Factor App guidelines&lt;/a&gt;. This will ensure that your app is horizontally scalable and can be deployed in a manner that will result in zero down time.  Below are some highlights that you should abide by.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Do not store sessions on disk or in memory.  Store them in some type of shared database or file system.  This could be your favorite database or an in memory database as well.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Do not store configuration information in your application or on disk.  You should store your config info for your app in environment variables.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;This is probably the most important, your application needs to be forward and backwards compatible with your database schema…  Say what?  Yes, you need to trust your developers to manage the database schema from your code.If you are using a relational database, you will need some kind of framework to do database migrations for you.  It’s not just that simple with relational databases though…  If you have a big database migration DO NOT PERORM MIGRATIONS THAT WILL INTERRUPT TRAFFIC!  Perform them slowly over time where migrations do not impact users and traffic.  Yahoo had a major application upgrade and it took them 6 months to do the migration to avoid impacting users and taking an outage.  Remember we do not take outages…  If you are in NoSQL land, your life is easier.  Just revision your API’s and educate your developers on forward and backwards data compatibility.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;importance-of-zero-down-time-deployments&#34;&gt;Importance of Zero Down Time Deployments&lt;/h2&gt;

&lt;p&gt;So why are zero down time deployments so important?  The answer is simple, to keep your website/app up so you can make money!  Well that might be over-simplified a bit, but basically it all boils down to keeping your app up so you can continue to do what you do best, and hopefully that involves making money.  If you look at Facebook, for example, they put code into production weeks and months before a feature is exposed to the public.  They extensively test the features on employees first, then slowly enable the features to the rest of the world.&lt;/p&gt;

&lt;p&gt;This is key, getting features in front of your customers and getting feedback from them.  If it works that’s great, but if it doesn’t at least you know in a short time frame so you can remove it and pivot to go in a different direction.  The current landscape is so fast paced that if you don’t get a feature out, your competition could beat you.&lt;/p&gt;

&lt;h2 id=&#34;how-does-it-work&#34;&gt;How does it work?&lt;/h2&gt;

&lt;p&gt;So let’s walk through what needs to happen to perform zero downtime deployments in Cloud Foundry.  For the use of the walk-through, the application is currently taking traffic on &lt;code&gt;myapp.mybluemix.net&lt;/code&gt;.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Deploy your app or use a currently running app.
Currently your application is taking traffic on &lt;code&gt;myapp.mybluemix.net&lt;/code&gt;.
&lt;a href=&#34;http://www.jeffsloyer.io/images/2015/06/zero-downtime-graphics.001-medium.png&#34;&gt;&lt;img src=&#34;http://www.jeffsloyer.io/images/2015/06/zero-downtime-graphics.001-medium.png&#34; alt=&#34;zero downtime graphics.001 Zero Down Time Deploys with the CF Autopilot Plugin&#34; /&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Deploy the new version of your app to &lt;code&gt;myapp-temp.mybluemix.net&lt;/code&gt;.
At this time there is currently two versions of your app running.  &lt;code&gt;myapp.mybluemix.net&lt;/code&gt; is still taking production traffic.
The new app &lt;code&gt;myapp-temp.mybluemix.net&lt;/code&gt; is separate, it can be pointed to your production API keys and databases at this point.
&lt;a href=&#34;http://www.jeffsloyer.io/images/2015/06/zero-downtime-graphics.002-medium.png&#34;&gt;&lt;img src=&#34;http://www.jeffsloyer.io/images/2015/06/zero-downtime-graphics.002-medium.png&#34; alt=&#34;zero downtime graphics.002 Zero Down Time Deploys with the CF Autopilot Plugin&#34; /&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Perform smoke tests on the new version of the application.
Some people say this step is optional, but to me its not.  This is key to make sure there wasn’t any weird regressions or merge issues, they CAN happen…&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Map production traffic to the new version of your app.
At this point the old version of your app and the new version are both taking production traffic.
&lt;a href=&#34;http://www.jeffsloyer.io/images/2015/06/zero-downtime-graphics.003-medium.png&#34;&gt;&lt;img src=&#34;http://www.jeffsloyer.io/images/2015/06/zero-downtime-graphics.003-medium.png&#34; alt=&#34;zero downtime graphics.003 Zero Down Time Deploys with the CF Autopilot Plugin&#34; /&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Unmap production traffic from the old version of the app.  You can optionally delete the old version as well.
At this point the new version becomes production and ONLY it is taking traffic.
The new version still has two URL’s though, &lt;code&gt;myapp.mybluemix.net&lt;/code&gt; and &lt;code&gt;myapp-temp.mybluemix.net&lt;/code&gt;.
&lt;a href=&#34;http://www.jeffsloyer.io/images/2015/06/zero-downtime-graphics.004-medium.png&#34;&gt;&lt;img src=&#34;http://www.jeffsloyer.io/images/2015/06/zero-downtime-graphics.004-medium.png&#34; alt=&#34;zero downtime graphics.004 Zero Down Time Deploys with the CF Autopilot Plugin&#34; /&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Remove the temporary route &lt;code&gt;myapp-temp.mybluemix.net&lt;/code&gt; from the new version of your app.
&lt;a href=&#34;http://www.jeffsloyer.io/images/2015/06/zero-downtime-graphics.005-medium.png&#34;&gt;&lt;img src=&#34;http://www.jeffsloyer.io/images/2015/06/zero-downtime-graphics.005-medium.png&#34; alt=&#34;zero downtime graphics.005 Zero Down Time Deploys with the CF Autopilot Plugin&#34; /&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;While this can be scripted there really isn’t a need to do that, there is a Cloud Foundry CLI plugin to do this.&lt;/p&gt;

&lt;h2 id=&#34;autopilot-plugin&#34;&gt;Autopilot plugin&lt;/h2&gt;

&lt;p&gt;Recently the Cloud Foundry CLI started supporting plugins.  This is the holy grail for CF and you can start doing some fun stuff.  In this case, the fun stuff is automating the complex, possibly human error-prone, steps above.  As a dev, if I can automate something and reduce the chance of something going wrong, I am all in.  If you do this, your IT/operations department will love you.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/concourse/autopilot&#34;&gt;The plugin&lt;/a&gt; performs the above steps for you for performing the zero downtime deployment.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Ensure you have a &lt;a href=&#34;http://bluemix.net/?cm_mmc=Display-JeffSloyer.io-_-BluemixSampleApp-AutoPilotPlugin-_-Node-WatsonPersonalityInsights-_-BM-DevAd&#34;&gt;Bluemix&lt;/a&gt; account, if you do not sign up &lt;a href=&#34;http://bluemix.net/?cm_mmc=Display-JeffSloyer.io-_-BluemixSampleApp-AutoPilotPlugin-_-Node-WatsonPersonalityInsights-_-BM-DevAd&#34;&gt;Bluemix&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Install dependencies.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Golang installed (&lt;a href=&#34;https://golang.org/doc/install&#34;&gt;instructions&lt;/a&gt;)&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Version 6.7.0 or greater of the Cloud Foundry CLI
To check what version you have running, run &lt;code&gt;cf -v&lt;/code&gt; in your terminal.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[01:36 PM] jsloyer@jeffs-mbp-2 [~]&amp;gt;cf -v
cf version 6.8.0-b15c536-2014-12-10T23:34:29+00:00
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;To upgrade go &lt;a href=&#34;https://github.com/cloudfoundry/cli/releases&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Ensure you have an app running/already deployed.  The plugin requires that you have an app already deployed.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Run the following.  I will describe what each line is doing.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;go get github.com/concourse/autopilot
cf install-plugin $GOPATH/bin/autopilot
cf login -a ${CF_API} -u ${CF_USERNAME} -p ${CF_PASSWORD} -o ${CF_ORG} -s ${CF_SPACE}
cf zero-downtime-push myapp -f manifest.yml
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Line 1 fetches the source code for the plugin.
Line 2 installs the plugin
Line 3 logins into Bluemix.  I have the sensitive information replace with environment variables.
Line 4 performs the zero down time deployment.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The plugin does require a &lt;code&gt;manifest.yml&lt;/code&gt;.  The plugin basically views the &lt;code&gt;manifest.yml&lt;/code&gt; files as the truth of the state of the application.&lt;/p&gt;

&lt;h2 id=&#34;extensions-with-ci-pipelines&#34;&gt;Extensions with CI Pipelines&lt;/h2&gt;

&lt;p&gt;This will be forthcoming in an upcoming blog post on how to use some of the most popular CI engines out there.&lt;/p&gt;

&lt;h2 id=&#34;recap&#34;&gt;Recap&lt;/h2&gt;

&lt;p&gt;Just to review what we did here, we learned what zero down time deployments are, why they are crucial to any Internet scale application, and how to perform a zero down time deployment.  Then, we took it a step further on how to use a Cloud Foundry plugin to do the heavy lifting for us and automate the zero down time deployment.&lt;/p&gt;

&lt;p&gt;I would love to hear your feedback and any suggestions you have, please reach out to me on Twitter &lt;a href=&#34;https://twitter.com/jsloyer target=&#34;&gt;@jsloyer&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;video&#34;&gt;Video&lt;/h2&gt;

&lt;p&gt;I have also published a video if you prefer to watch that instead, please check out &lt;a href=&#34;http://www.jeffsloyer.io/post/zero-downtime-deployment-with-the-cf-autopilot-plugin-video/&#34;&gt;Zero Downtime Deployment with the CF Autopilot Plugin – Video.&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;additional-part-s&#34;&gt;Additional part&amp;rsquo;s&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.jeffsloyer.io/post/zero-downtime-deployments-with-bluemix-and-codeship/&#34;&gt;Zero downtime deployments with Bluemix and Codeship&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Get Pumped for the Cloud Foundry Summit</title>
      <link>http://www.jeffsloyer.io/post/get-pumped-for-the-cloud-foundry-summit/</link>
      <pubDate>Thu, 30 Apr 2015 10:38:05 -0500</pubDate>
      
      <guid>http://www.jeffsloyer.io/post/get-pumped-for-the-cloud-foundry-summit/</guid>
      <description>

&lt;p&gt;I’m pumped for the Cloud Foundry Summit! Are you??? Well if you aren’t yet hopefully you will be after reading this!&lt;/p&gt;

&lt;p&gt;If you attended the conference last year there was an awesome presentation on the future of Diego.  What is Diego you ask?  It is the new DEA that is coming for Cloud Foundry.  It is a complete re-write in Go and will add some new features such as the ability to swap out the underlaying linux containers for things like Docker.  Additionally another huge win is adding in plugins, this will be awesome as well!&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;Additionally, there is always a cast of characters there…  &lt;a href=&#34;https://twitter.com/angelluisdiaz&#34;&gt;Angel Diaz&lt;/a&gt; (from IBM) is a great speaker and always pumps people up (literally).  You should ask him to arm wrestle you, I would lose…&lt;/p&gt;

&lt;p&gt;Ok so for reals, what am I really excited about, well the tech, duh…  Here is a list of some of the sessions I am really pumped about and why.&lt;/p&gt;

&lt;h3 id=&#34;sessions&#34;&gt;Sessions&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://cfsummit2015.sched.org/event/b9a2c4ad617e38167044bb9c42801438?iframe=no&amp;amp;w=&amp;amp;sidebar=yes&amp;amp;bg=no#.VUEDeK1Viko&#34;&gt;A Developer’s Perspective on Cloud Foundry Operations: One Month in the Trenches&lt;/a&gt; by Cornelia Davis — Well this one is pretty obvious why, Cornelia is an awesome speaker and I am never let down by her talks, must see just for her.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://cfsummit2015.sched.org/event/73242303138c19c0bacac3e71cf62a12#.VUIwGq1VhBc&#34;&gt;Rocking the Lattice: A New Path for Cloud Foundry Applications&lt;/a&gt; by James Bayer — Again probably the same reason as above, James is an awesome speaker and a must see&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://cfsummit2015.sched.org/event/c8c7462b7d0e3775c14aec71bcdb75db?iframe=no&amp;amp;w=&amp;amp;sidebar=yes&amp;amp;bg=no#.VUEDqa1Viko&#34;&gt;Case Study: Lessons learned hosting a large, global Cloud Foundry deployments&lt;/a&gt; by Adam Gunther — This should be a good one, hosting and running a large scale Cloud Foundry deployment isn’t easy it will be interesting to learn some lessons learned.  Plus Adam is my new manager so I should probably show up so he has a plant in the audience…&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://cfsummit2015.sched.org/event/bb7647207209ec5d410011d67055d615?iframe=no&amp;amp;w=&amp;amp;sidebar=yes&amp;amp;bg=no#.VUEDtK1Viko&#34;&gt;A glimpse at Runtime&lt;/a&gt; by Zachary Auerbach and Daniel Lavine — The runtime is probably the most important part of Cloud Foundry and its always nice to hear and see some of the inner workings of the runtime team, a must see…&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://cfsummit2015.sched.org/event/f81390f973280b917bf5833a808a3fe5?iframe=no&amp;amp;w=&amp;amp;sidebar=yes&amp;amp;bg=no#.VUEDwq1Viko&#34;&gt;The Road to Persistence on Cloud Foundry Diego&lt;/a&gt; by Caleb Miles and Ted Young — This will be a good one, this talk is going to talk about a new model for the 12 factor app and more specifically some cool cluster scheduling systems like Apache Mesos.  I have friends at Twitter and the swear up and down on Mesos and how awesome is it.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://cfsummit2015.sched.org/event/ba341002c205509deb3e6afe36df3da0?iframe=no&amp;amp;w=&amp;amp;sidebar=yes&amp;amp;bg=no#.VUHwD61Vikp&#34;&gt;Finding and Organizing a Great Cloud Foundry User Group&lt;/a&gt; by Daniel Krook, Manuel Silveyra and Animesh Singh — Cloud Foundry wouldn’t be successful without its community.  These guys are going to be talking about how they have run and organized some of the most successful Cloud Foundry meetups in the Bay Area and NYC.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Again, get PUMPED!!!  I am all jacked up and ready to head to the CF Summit, better see you there.  If you come up to me at the Summit and yell out get pumped in front of me, I’ll buy you a beer or something…&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Etherpad in Cloud Foundry – Quick Start Guide</title>
      <link>http://www.jeffsloyer.io/post/etherpad-in-cloud-foundry-quick-start-guide/</link>
      <pubDate>Sat, 03 Jan 2015 22:19:30 -0500</pubDate>
      
      <guid>http://www.jeffsloyer.io/post/etherpad-in-cloud-foundry-quick-start-guide/</guid>
      <description>

&lt;p&gt;Etherpad Lite is an awesome online collaboration platform.  Multiple open source projects use it for collaboration.  One of the most notable ones is the Openstack Project &lt;a href=&#34;https://etherpad.openstack.org/&#34;&gt;Openstack Etherpad&lt;/a&gt;. To help you navigate the setup, this post provides step-by-step instructions to get things running. You may have read that Etherpad is complicated to install in a PaaS and there really isn’t a comprehensive quick start guide for running Etherpad-lite in Cloud Foundry. No worries, here is one!&lt;/p&gt;

&lt;h3 id=&#34;login-register-for-bluemix&#34;&gt;Login/Register for Bluemix&lt;/h3&gt;

&lt;p&gt;The first step is creating a Node.js app in Bluemix.  Let’s login to Bluemix, open a web browser and visit &lt;a href=&#34;http://bluemix.net/&#34;&gt;Bluemix&lt;/a&gt; and click LOG IN.  If you don’t have an account click, SIGN UP.  Since Etherpad-Lite is built using Node.js, we want to start with an empty Node.js app in Bluemix.  We will do this from the command line.&lt;/p&gt;

&lt;p&gt;If you already have the CLI command line executable, you can skip this step.  If you don’t have it, follow the steps from the &lt;a href=&#34;https://www.ng.bluemix.net/docs/#cli/index.html#cli&#34;&gt;Bluemix docs&lt;/a&gt; on how to install the command line for your platform and how to set it up.  Once you get things setup you should be able to run &lt;code&gt;cf s&lt;/code&gt; and get the following output:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[01:30 PM] jsloyer@jeffs-mbp [blah]&amp;gt;cf s
cf domains Getting domains in org jbsloyer@us.ibm.com as ...
name status
mybluemix.net shared
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Your output will be slightly different (this is ok).  This was just a check to make sure things are setup correctly.  If you are getting an auth error or error that you aren’t pointing to Cloud Foundry, refer back to the docs, reply to this post, or post a question to &lt;a href=&#34;http://stackoverflow.com/questions/tagged/bluemix&#34;&gt;Stackoverflow&lt;/a&gt; for help.&lt;/p&gt;

&lt;h3 id=&#34;upload-etherpad-lite-code-to-bluemix&#34;&gt;Upload Etherpad-Lite Code to Bluemix&lt;/h3&gt;

&lt;p&gt;OK, next we need to upload the Etherpad-Lite code to Bluemix. The version of Etherpad-Lite is a forked version of the Etherpad code that has made things easy for us with Cloud Foundry. So head on over to the &lt;a href=&#34;https://github.com/cloudfoundry-community/etherpad-lite-cf/releases&#34;&gt;releases page&lt;/a&gt; for &lt;code&gt;etherpad-lite-cf&lt;/code&gt;.  Choose the latest, as of this writing it was version 1.4.1.  Download the etherpad-lite-cf.zip file.  We need to extract this file to a new folder—do not extract it in the folder it is sitting in.  For example, I extracted it into an empty folder called blah.  Make sure you do not have the zip file you downloaded in the newly created folder, it should just contain the extracted files:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[10:50 AM] jsloyer@jeffs-mbp [blah]&amp;gt;pwd
/Users/jsloyer/Downloads/blah
[10:50 AM] jsloyer@jeffs-mbp [blah]&amp;gt;ls
CHANGELOG.md Procfile node_modules src var
CONTRIBUTING.md README.md package.json start.bat
LICENSE bin settings.json tests
Makefile doc settings.json.template tools
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The next step is pushing the app to Bluemix.  Run the following command, replacing yourappname with a unique name for your app.  This name will also be the url to your app as well.  If you get an error mentioning the host is taken, just choose a different name.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;cf push yourappname -m 512M -b https://github.com/cloudfoundry/nodejs-buildpack.git
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The above is saying we are giving our app 512MB of memory and calling out a specific buildpack to use (in this case Node.js). This step will take awhile but eventually you should get the following output.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;0 of 1 instances running, 1 starting
0 of 1 instances running, 1 starting
0 of 1 instances running, 1 starting
1 of 1 instances running
App started Showing health and status for app jbs-etherpad3 in org jbsloyer@us.ibm.com / space demos as ...
OK
requested state: started
instances: 1/1
usage: 512M x 1 instances
urls: jbs-etherpad3.mybluemix.net
state since cpu memory disk
#0 running 2015-01-13 10:36:32 AM 0.0% 87.2M of 512M 242.1M of 1G
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If you visit the url from above, Etherpad will be functional, however it is using a built-in database and this isn’t what we want.  We want to back in with MySQL.&lt;/p&gt;

&lt;h3 id=&#34;create-and-bind-a-database-to-our-app&#34;&gt;Create and bind a database to our app&lt;/h3&gt;

&lt;p&gt;Next, we need to create a service to allow Etherpad to connect to our database.  To do that, let’s go back to the Bluemix UI.  In the top click on Dashboard, you should see the app you created.  Let’s go ahead and click on it.&lt;/p&gt;

&lt;p&gt;To add the service Bluemix will provision and bind a service to our app for us.  Click &amp;ldquo;Add A Service&amp;rdquo; and scroll down to data management.  We want ClearDB for this app.  Click on ClearDB.  ClearDB is a hosted version of MySQL.  Everything on the right should be pre-populated so let’s just click &amp;ldquo;Create&amp;rdquo;.  If things are not pre-populated, choose the appropriate app, the one we just created.&lt;/p&gt;

&lt;p&gt;It will ask if you want to restage the app, that is fine, so click RESTAGE.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://www.jeffsloyer.io/images/2015/06/restage-medium.jpg&#34; alt=&#34;restage Etherpad in Cloud Foundry – Quick Start Guide&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;configure-the-app-with-cleardb-mysql&#34;&gt;Configure the app with ClearDB (MySQL)&lt;/h3&gt;

&lt;p&gt;To switch the app over to MySQL, we need to edit the &lt;code&gt;settings.json&lt;/code&gt; for the app and then re-upload the app to Bluemix. You will need to replace the value DATABASE on line 9 with the name of your ClearDB service.  To get this info, let’s go back to the Bluemix UI and our app.  If you click on &amp;ldquo;Show Credentials&amp;rdquo;, it will give you the name of your ClearDB service, copy this.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://www.jeffsloyer.io/images/2015/06/showcreds-medium.jpg&#34; alt=&#34;showcreds Etherpad in Cloud Foundry – Quick Start Guide&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Copy the name, in this example it is &amp;ldquo;ClearDB MySQL Database-hu&amp;rdquo;, without quotes.  I have highlighted below what you need to copy, don’t copy the quotes.  I have hidden my connection info to my database so my database can’t be hacked.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://www.jeffsloyer.io/images/2015/06/dbname-medium.jpg&#34; alt=&#34;dbname Etherpad in Cloud Foundry – Quick Start Guide&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Open up settings.json with your favorite text editor and on line 9 replace DATABASE with the name of your ClearDB service that we copied from above.  Save the file. Here is my line 9:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;quot;dbService&amp;quot;: &amp;quot;ClearDB MySQL Database-hu&amp;quot;,
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The last step is re-pushing our app to Bluemix since we made a change to it.  To do this we need to use the push command we used above:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;cf push yourappname -m 512M -b https://github.com/cloudfoundry/nodejs-buildpack.git
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Eventually it should show us that our app is running, my output is below:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;0 of 1 instances running, 1 starting
0 of 1 instances running, 1 starting
0 of 1 instances running, 1 starting
1 of 1 instances running
App started Showing health and status for app jbs-etherpad3 in org jbsloyer@us.ibm.com / space demos as ...
OK
requested state: started
instances: 1/1
usage: 512M x 1 instances
urls: jbs-etherpad3.mybluemix.net
state since cpu memory disk
#0 running 2015-01-13 10:36:32 AM 0.0% 87.2M of 512M 242.1M of 1G
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;So if we visit the url it gave us, Etherpad should be up and running.  If you run into issues please post a comment here or post to &lt;a href=&#34;http://stackoverflow.com/questions/tagged/bluemix&#34;&gt;Stackoverflow&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&#34;ssl&#34;&gt;SSL&lt;/h3&gt;

&lt;p&gt;Bluemix provides SSL out of the box for your app.  If your app is running at &lt;strong&gt;http&lt;/strong&gt;://jbs-etherpad3.mybluemix.net you are given SSL for free.  To use SSL, just access your app over https, for my example it would be &lt;strong&gt;https&lt;/strong&gt;://jbs-etherpad3.mybluemix.net.  If you want to use SSL with your own domain name and certificate, you can do this also!  See &lt;a href=&#34;https://jeffsloyer.io/2014/08/18/inbound-ssl-in-bluemix/&#34;&gt;SSL Certificates and Bluemix Custom Domains&lt;/a&gt; on how to do it.&lt;/p&gt;

&lt;p&gt;For more info about SSL in for free in Bluemix check out the following video.&lt;/p&gt;

&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/3Y0wLQcXbQ0&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;

&lt;h3 id=&#34;caveats&#34;&gt;Caveats&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;The biggest issue to me is that this deployment of Etherpad only allows 1 instance. While this works for development and testing, it is not suitable for production.  This is a limitation right now of Etherpad in the way it uses socket.io and sessions. If you need more capacity, just bump up your RAM for your app.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;instructions-adapted-from-these-references&#34;&gt;Instructions adapted from these references&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://github.com/cloudfoundry-community/etherpad-lite-cf#using-database-from-user-provided-service&#34;&gt;https://github.com/cloudfoundry-community/etherpad-lite-cf#using-database-from-user-provided-service&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://arthurh.fr/blog-Install-etherpad-lite-with-cloudfoundry&#34;&gt;http://arthurh.fr/blog-Install-etherpad-lite-with-cloudfoundry&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Inbound Ssl in Bluemix</title>
      <link>http://www.jeffsloyer.io/post/inbound-ssl-in-bluemix/</link>
      <pubDate>Mon, 18 Aug 2014 13:24:00 -0500</pubDate>
      
      <guid>http://www.jeffsloyer.io/post/inbound-ssl-in-bluemix/</guid>
      <description>&lt;p&gt;Did you know in Bluemix you get inbound SSL for free?  It is automatically turned on and enabled for every app.  All you have to do is just access your app over https instead of http.&lt;/p&gt;

&lt;p&gt;Developers don’t need to implement SSL in their app, you just need to support HTTP and the Bluemix infrastructure will support HTTPS for you and do SSL offloading.&lt;/p&gt;

&lt;p&gt;Additionally Bluemix supports the &lt;code&gt;x-forwarded-proto&lt;/code&gt; header to allow developers to check with protocol requests are coming in over.  I have pasted some example Node.JS middleware that you can check if the request is coming in over https or not.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;var middleware = module.exports,
    url = require(&amp;quot;url&amp;quot;);

var HTTP = &amp;quot;http:&amp;quot;,
    HTTPS = &amp;quot;https:&amp;quot;;

middleware.transportSecurity = function () {

    var applicationURL = config().appURL(),
        scheme = url.parse(applicationURL).protocol;

    function securityEnabled () {
        if (scheme !== HTTP &amp;amp;amp;&amp;amp;amp; scheme !== HTTPS) {
            throw new Error(
                &amp;quot;The application URL scheme must be &#39;http&#39; or &#39;https&#39;.&amp;quot;
            );
        }
        return scheme === HTTPS;
    }

    function redirectURL (request) {
        return url.resolve(applicationURL, request.originalUrl);
    }

    if (securityEnabled()) {
        console.log(&amp;quot;Transport security is enabled.&amp;quot;);
    }

    return function (request, response, next) {
        // handling non-standard proxy headers ibm cf uses
        if(request.headers.protocol) {
            request.headers[&amp;quot;x-forwarded-proto&amp;quot;] = request.headers.protocol;
        } else
        if(request.headers.$wssc) {
            // The $wssc header is something that WebSphere inserts to pass the
            // proxied protocol to downstream applications
            request.headers[&amp;quot;x-forwarded-proto&amp;quot;] = request.headers.$wssc;
        }

        if (securityEnabled() &amp;amp;amp;&amp;amp;amp; !request.secure) {
            log.info(&amp;quot;Redirecting insecure request for&amp;quot;, request.originalUrl);
            response.redirect(301, redirectURL(request));
        }
        else {
            next();
        }
    };

};
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;...
var middleware = require(&amp;quot;./middleware&amp;quot;);
...
app.use(middleware.transportSecurity());
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;For more information check out &lt;a href=&#34;https://www.ng.bluemix.net/docs/manageapps/secapps.html&#34;&gt;the Bluemix SSL docs&lt;/a&gt;.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>